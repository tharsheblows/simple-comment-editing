function SCE_comment_scroll(a,b){var c=""+window.location,d=/(#[^-]*\-[^&]*)/;if(d.test(c)&&(c=jQuery(""+window.location.hash),c.length>0)){var e=c.offset().top;jQuery("html,body").animate({scrollTop:e},1)}}function SCE_comments_updated(a){var b=a.match(/#comment-(\d+)/);b&&(comment_id=b[1],jQuery("#comment-"+comment_id).find(".sce-edit-button").simplecommentediting())}jQuery(document).ready(function(a){sce=a.simplecommentediting=a.fn.simplecommentediting=function(){return this.each(function(){function b(b,d){var e=wp.hooks.applyFilters("sce.comment.div","#comment-"+d.cid,b,d);console.log(e),console.log(b),console.log(d),a(b).siblings(".sce-textarea").off(),a(b).off(),a(b).parent().remove(),a.post(c,{action:"sce_delete_comment",comment_id:d.cid,post_id:d.pid,nonce:d._wpnonce},function(b){a("#sce-edit-comment-status"+d.cid).removeClass().addClass("sce-status updated").html(simple_comment_editing.comment_deleted).show(),setTimeout(function(){a(e).slideUp()},5e3)},"json")}var c=a(this).find("a:first").attr("href"),d=wpAjax.unserialize(c),e=this;a(e).on("click","a",function(b){b.preventDefault(),a("#sce-edit-comment-status"+d.cid).removeClass().addClass("sce-status").css("display","none"),a(e).fadeOut("fast",function(){a(e).siblings(".sce-textarea").find("button").prop("disabled",!1),a(e).siblings(".sce-textarea").fadeIn("fast",function(){a(e).siblings(".sce-textarea").find("textarea:first").focus()})})}),a(e).siblings(".sce-textarea").on("click",".sce-comment-cancel",function(b){b.preventDefault(),a(e).siblings(".sce-textarea").fadeOut("fast",function(){a(e).fadeIn("fast"),a("#sce-edit-comment"+d.cid+" textarea").val(sce.textareas[d.cid])})}),a(e).siblings(".sce-textarea").on("click",".sce-comment-delete",function(a){a.preventDefault(),confirm(simple_comment_editing.confirm_delete)&&b(e,d)}),a(e).siblings(".sce-textarea").on("click",".sce-comment-save",function(f){f.preventDefault(),a(e).siblings(".sce-textarea").find("button").prop("disabled",!0),a(e).siblings(".sce-textarea").fadeOut("fast",function(){a(e).siblings(".sce-loading").fadeIn("fast");var f=a(e).siblings(".sce-textarea").find("textarea").val(),g=a.trim(f);if("I am God"==f&&"object"==typeof console&&console.log("Isn't God perfect?  Why the need to edit?"),""==g&&1==simple_comment_editing.allow_delete)return confirm(simple_comment_editing.confirm_delete)?void b(e,d):(a("#sce-edit-comment"+d.cid+" textarea").val(sce.textareas[d.cid]),void a(e).siblings(".sce-loading").fadeOut("fast",function(){a(e).fadeIn("fast")}));jQuery("body").triggerHandler("sce.comment.save.pre",[d.cid,d.pid]);var h={action:"sce_save_comment",comment_content:g,comment_id:d.cid,post_id:d.pid,nonce:d._wpnonce};h=wp.hooks.applyFilters("sce.comment.save.data",h),a.post(c,h,function(b){a(e).siblings(".sce-loading").fadeOut("fast",function(){a(e).fadeIn("fast",function(){b.errors?(1==b.remove&&(a(e).siblings(".sce-textarea").off(),a(e).off(),a(e).parent().remove()),a("#sce-edit-comment-status"+d.cid).removeClass().addClass("sce-status error").html(b.error).show()):(a("#sce-comment"+d.cid).html(b.comment_text),sce.textareas[d.cid]=a("#sce-edit-comment"+d.cid+" textarea").val(),jQuery("body").triggerHandler("sce.comment.save",[d.cid,d.pid,b]))})})},"json")})}),a.post(c,{action:"sce_get_time_left",comment_id:d.cid,post_id:d.pid,_ajax_nonce:simple_comment_editing.nonce},function(b){var c=parseInt(b.minutes),d=parseInt(b.seconds),f=sce.get_timer_text(c,d),g=Boolean(b.allow_unlimited_time),h=b.can_edit;return h?(g||a(e).find(".sce-timer").html(f),a(e).show(400,function(){a(e).trigger("sce.timer.loaded",e)}),sce.textareas[b.comment_id]=a("#sce-edit-comment"+b.comment_id+" textarea").val(),sce.timers[b.comment_id]={minutes:c,seconds:d,start:(new Date).getTime(),time:0,timer:function(){if(timer_seconds=sce.timers[b.comment_id].seconds-1,timer_minutes=sce.timers[b.comment_id].minutes,timer_minutes<=0&&timer_seconds<=0&&!g)return a(e).siblings(".sce-textarea").off(),a(e).off(),void a(e).parent().remove();g||(timer_seconds<0&&(timer_minutes-=1,timer_seconds=59),a(e).find(".sce-timer").html(sce.get_timer_text(timer_minutes,timer_seconds)),sce.timers[b.comment_id].seconds=timer_seconds,sce.timers[b.comment_id].minutes=timer_minutes);var c=sce.timers[b.comment_id];c.time+=1e3;var d=(new Date).getTime()-c.start-c.time;window.setTimeout(c.timer,1e3-d)}},void window.setTimeout(sce.timers[b.comment_id].timer,1e3)):(a(e).siblings(".sce-textarea").off(),a(e).off(),void a(e).parent().remove())},"json")})},sce.get_timer_text=function(a,b){0>b&&(a-=1,b=59);var c="&nbsp;&ndash;&nbsp;";return a>=1&&(c+=a+" "+simple_comment_editing.timer.minutes[a],b>0&&(c+=" "+simple_comment_editing.and+" ")),b>0&&(c+=b+" "+simple_comment_editing.timer.seconds[b]),c=wp.hooks.applyFilters("sce.comment.timer.text",c,simple_comment_editing.timer.minutes[a],simple_comment_editing.timer.seconds[b],a,b)},sce.set_comment_cookie=function(b,c,d){a.post(simple_comment_editing.ajax_url,{action:"sce_get_cookie_var",post_id:b,comment_id:c,_ajax_nonce:simple_comment_editing.nonce},function(a){var b=new Date(a.expires);b=b.toGMTString(),document.cookie=a.name+"="+a.value+"; expires="+b+"; path="+a.path,"function"==typeof d&&d(c)},"json")},sce.timers=new Array,sce.textareas=new Array,a(".sce-edit-button").simplecommentediting(),a(".sce-edit-button").on("sce.timer.loaded",wp.hooks.applyFilters("sce.comment.scroll",SCE_comment_scroll)),a("body").on("comment.posted",function(b,c,d){sce.set_comment_cookie(c,d,function(b){a.post(simple_comment_editing.ajax_url,{action:"sce_get_comment",comment_id:b,_ajax_nonce:simple_comment_editing.nonce},function(b){a("body").trigger("sce.comment.loaded",[b])},"json")})}),a("body").on("epoch.comment.posted",function(b,c,d){sce.set_comment_cookie(c,d,function(b){a.post(simple_comment_editing.ajax_url,{action:"sce_epoch_get_comment",comment_id:b,_ajax_nonce:simple_comment_editing.nonce},function(c){comment=Epoch.parse_comment(c),a("#comment-"+b).replaceWith(comment),a("#comment-"+b).find(".sce-edit-button").simplecommentediting()},"json")})}),a("body").on("epoch.comments.loaded",function(b){a(".sce-edit-button").simplecommentediting()})});